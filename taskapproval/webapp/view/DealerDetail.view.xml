<mvc:View height="100%" controllerName="com.knpl.dga.taskapproval.controller.DealerDetail" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout" xmlns="sap.m" xmlns:f="sap.f" xmlns:fb="sap.ui.comp.filterbar" xmlns:vm="sap.ui.comp.variants" xmlns:smartFilterBar="sap.ui.comp.smartfilterbar">
    <f:DynamicPage busy="{oViewModel>/busy}" busyIndicatorDelay="0"	stickySubheaderProvider="iconTabBar"
			class="sapUiNoContentPadding" showFooter="true" id="dynamicPageDealerId" headerExpanded="true">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{= ${Visit/TargetDealer/Name} === null ? 'NA' : ${Visit/TargetDealer/Name}}"/>
                </f:heading>
                <f:breadcrumbs>
                    <Breadcrumbs currentLocationText="{i18n>DealerDetails}">
                        <Link text="{i18n>MainObject}" press="onNavToHome"/>
                    </Breadcrumbs>
                </f:breadcrumbs>
                <f:actions>
                    <Button press="onPressApprove" type="Emphasized" text="{i18n>Approve}" visible="{= ${Visit/Status} === 'Completed' ? false : ${Visit/Status} === 'Approved' ? false : ${Visit/Status} === 'Rejected' ? false : true}" />
                    <Button press="onPressReject" type="Reject" text="{i18n>Reject}" visible="{= ${Visit/Status} === 'Completed' ? false : ${Visit/Status} === 'Approved' ? false : ${Visit/Status} === 'Rejected' ? false : true}" />
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <layout:HorizontalLayout allowWrapping="false">
                    <layout:VerticalLayout class="sapUiSmallMarginEnd">
                        <ObjectAttribute title="{i18n>PhoneNumber}" text="{path:'Visit/TargetDealer/PhoneNumber',formatter:'.formatter.fmtCheckNull'}"/>
                        <ObjectAttribute title="{i18n>SalesGroupId}" text="{= ${Visit/TargetDealer/DealerSalesDetails/SalesGroupId} === null ? 'NA' : ${Visit/TargetDealer/DealerSalesDetails/SalesGroupId}}"/>
                        <ObjectAttribute title="{i18n>SalesGroupName}" text="{= ${Visit/TargetDealer/DealerSalesDetails/SalesGroup/Description} === null ? 'NA' : ${Visit/TargetDealer/DealerSalesDetails/SalesGroup/Description}}"/>
                    </layout:VerticalLayout>
                    <layout:VerticalLayout class="sapUiSmallMarginBeginEnd" >
                        <Label text="{i18n>RequestID}"  />
                        <ObjectStatus class="sapMObjectStatusLarge" text="{Visit/Id}" state="None"/>
                    </layout:VerticalLayout>
                    <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                        <Label  text="{i18n>TaskStatus}"/>
                        <ObjectStatus class="sapMObjectStatusLarge" text="{Visit/Status}" 
                            state="{= ${Visit/Status} === 'Completed' ? 'Success' : ${Visit/Status} === 'Approved' ? 'Success' : ${Visit/Status} === 'Rejected' ? 'Error' : 'Warning'}"/>
                    </layout:VerticalLayout>
                </layout:HorizontalLayout>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <IconTabBar  select="onIcnTbarChange" selectedKey="{oModelDisplay>/IcnTabKey}" expandable="false" expanded="true" id="idDealerIconTabBar" class="sapUiResponsiveContentPadding" >
                <items>
                    <IconTabFilter  text="{i18n>VisitDetails}" key="0" >
                        <core:Fragment fragmentName="com.knpl.dga.taskapproval.view.fragments.VisitDetails" type="XML"/>
                    </IconTabFilter>
                    <IconTabFilter  text="{i18n>BasicDetails}" key="1" >
                        <core:Fragment fragmentName="com.knpl.dga.taskapproval.view.fragments.DealerBasicDetails" type="XML"/>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </f:content>
    </f:DynamicPage>
</mvc:View>
