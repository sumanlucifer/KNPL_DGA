<mvc:View height="100%" xmlns:smartTable="sap.ui.comp.smarttable" controllerName="com.knpl.dga.complains.controller.EditComplaint" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout" xmlns="sap.m" xmlns:f="sap.f" xmlns:fb="sap.ui.comp.filterbar" xmlns:vm="sap.ui.comp.variants" xmlns:smartFilterBar="sap.ui.comp.smartfilterbar">
    <f:DynamicPage busy="{oModelControl>/PageBusy}"	stickySubheaderProvider="iconTabBar"
			class="sapUiNoContentPadding" showFooter="true" id="dynamicPageId" headerExpanded="true">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{= ${IsNewConsumer} === true ? ${ConsumerName} : ${Lead/ConsumerName} }" class="sapUiTinyMarginTop"/>
                </f:heading>
                <f:breadcrumbs>
                    <Breadcrumbs currentLocationText="{i18n>ComplaintDetails}">
                        <Link text="{i18n>worklistTitle}" press="onNavBack"/>
                    </Breadcrumbs>
                </f:breadcrumbs>
                <f:expandedContent>
                    <Label text="{i18n>ComplaintID}: {ComplaintCode}"/>
                </f:expandedContent>
                <f:snappedContent>
                    <Label text="{i18n>ComplaintID}: {ComplaintCode}"/>
                </f:snappedContent>
                <f:snappedTitleOnMobile>
                    <Title text="{ComplaintType/ComplaintType}"/>
                </f:snappedTitleOnMobile>
                <f:actions>
                    <Button press="onPressWithdraw" type="Ghost" text="{i18n>btnWithdraw}" visible="{= ${ComplaintStatus} === 'RESOLVED' || ${ComplaintStatus} === 'WITHDRAWN'  ? false : true }" />
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <layout:HorizontalLayout allowWrapping="false">
                    <layout:VerticalLayout class="sapUiSmallMarginEnd">
                        <ObjectAttribute title="{i18n>MobileNo}" text="{= ${IsNewConsumer} === true ? ${ConsumerMobileNo} : ${Lead/PrimaryNum} }" class="sapUiTinyMarginBottom"/>
                        <ObjectAttribute title="{i18n>Date}" text="{path:'CreatedAt', type: 'sap.ui.model.type.DateTime', 
                            formatOptions: { 
                                pattern: 'dd/MM/yyyy' 
                            }}" class="sapUiTinyMarginBottom"/>
                        <ObjectAttribute title="{i18n>ComplaintType}" text="{ComplaintType/ComplaintType}" class="sapUiTinyMarginBottom"/>
                    </layout:VerticalLayout>
                    <!-- <layout:VerticalLayout class="sapUiSmallMarginBeginEnd" >
                        <Label  text="{i18n>ComplaintDetails}:"  />
                        <ObjectAttribute  text="{ComplaintSubtype/ComplaintSubtype}"/>
                    </layout:VerticalLayout> -->
                    <layout:VerticalLayout>
                        <Label  text="{i18n>ComplaintStatus}:"/>
                        <!-- <ObjectStatus class="sapMObjectStatusLarge" text="{path:'ComplaintStatus',formatter:'.fmtStatus'}" state="None"/> -->
                          <ObjectStatus class="sapMObjectStatusLarge" text="{path:'ComplaintStatus',formatter:'.fmtStatusHeader'}" 
                            state="{= ${ComplaintStatus} === 'RESOLVED' || ${ComplaintStatus} === 'WITHDRAWN'  ? 'Success' : 'Warning' }"/>
                    </layout:VerticalLayout>
                </layout:HorizontalLayout>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <VBox>
                <core:Fragment fragmentName="com.knpl.dga.complains.view.fragments.CustomerDetails" type="XML"/>
                <core:Fragment fragmentName="com.knpl.dga.complains.view.fragments.ResolutionDetails" type="XML"/>
            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>
