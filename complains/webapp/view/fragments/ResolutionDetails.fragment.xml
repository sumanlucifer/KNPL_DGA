<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" >
<l:Grid defaultSpan="XL5 L5 M5 S12" hSpacing="1"   >
        <Label  text="{i18n>TtlResolutionDetails}" design="Bold" />
        <!-- Status change to be handled by System -->
        <!-- <VBox renderType="Bare" >
            <Label text="{i18n>ComplaintStatus}" required="true" />
            <Select change="onChangeStatus" editable="{= !${oModelControl>/ComplainResolved} }" selectedKey="{oModelView>/ComplaintStatus}">
                <core:Item text="Registered" key="REGISTERED" />
                <core:Item text="In Review" key="INREVIEW" />
                <core:Item text="Resolved" key="RESOLVED" />
                <core:Item text="Withdrawn" key="WITHDRAWN" />
            </Select>
        </VBox> -->
        <VBox renderType="Bare"  >
        <Label text="{i18n>ResolutionType}" required="true" />
        <Text text="{i18n>TxtResolution}" />
         <!-- ,type:'com.knpl.dga.complains.model.cmbxDtype2' -->
        <!-- <ComboBox id="resolution" editable="{= !${oModelControl>/ComplainResolved} &amp;&amp; ${ResolutionId} === null  }" change="onChangeResolution" selectedKey="{path:'oModelView>/ResolutionId'}" -->
                   <ComboBox id="resolution" 
                   editable="{parts:['ApprovalStatus','ComplaintStatus'], formatter:'.formatter.fmtCmbxResolutionType' }" 
                   change="onChangeResolution" 
                   selectedKey="{path:'oModelView>/ResolutionId'}"  
                   items="{path:'/MasterResolutionSet',filters:[{path:'IsArchived',operator:'EQ',value1:false}]}" required="true"  >
            <items>
                <core:Item text="{Resolution}" key="{Id}" />
            </items>
        </ComboBox>
        <TextArea maxLength="300" editable="{= !${oModelControl>/ComplainResolved} &amp;&amp; ${ResolutionId} === null }" visible="{= +${oModelView>/ResolutionId} === 90  }" value="{path:'oModelView>/ResolutionOthers',type:'sap.ui.model.type.String',constraints:{maxLength:300,search:'^[a-zA-Z0-9]{1}[wW]*'}}"></TextArea>
        <Text visible="{= ${oModelView>/ResolutionId} === 90  }" text="{i18n>TxtMaxLength}" />
        <layoutData>
          	<l:GridData linebreak="true"/>
        </layoutData>
        </VBox>        
        <VBox renderType="Bare">
            <Label text="{i18n>Remark}"  required="true" />
            <TextArea showExceededText="false" maxLength="300" rows="4" cols="50" editable="{= !${oModelControl>/ComplainResolved} }" width="100%"
             value="{ path: 'oModelView>/Remark', type: 'sap.ui.model.type.String', constraints : {  maxLength : 300 }  }" required="false" />
            <Text text="{i18n>TxtMaxLength}" />
        </VBox>
</l:Grid>
<!-- Token code scenerio -->
<Label visible="{= ${oModelView>/ResolutionType} === 1  }" text="{i18n>TtlRewardPointDetails}" design="Bold" />
<l:Grid visible="{= ${oModelView>/ResolutionType} === 1  }"  defaultSpan="XL5 L5 M5 S12" hSpacing="1"   >        
    <VBox >
           <Label  text="{i18n>TokenCode}"  />
           <HBox renderType="Bare" >
           <Input  value="{oModelView>/TokenCode}" 
            editable="{= ${ComplaintStatus} === 'INREVIEW' &amp;&amp;  ${oModelView>/RewardPoints} === '' ? true : false  }"   />  
            <Button class="sapUiTinyMarginBeginEnd" visible="{=  ${ComplaintStatus} === 'REGISTERED' ||  ${ComplaintStatus} === 'INREVIEW' }" 
              icon="sap-icon://reset" tooltip="{i18n>Reset}" press="onResetToken" />
            <Button  class="sapUiTinyMarginBeginEnd"  visible="{=  ${ComplaintStatus} === 'REGISTERED' ||  ${ComplaintStatus} === 'INREVIEW'  }" 
                       text="{i18n>btnValidate}" press="onPressTokenCode" />
        </HBox>
       </VBox>
</l:Grid>

<!-- Product code scenerio -->
<Label  visible="{= ${oModelView>/ResolutionType} === 2  }" text="{i18n>TtlRewardPointDetails}" design="Bold" />
<l:Grid visible="{= ${oModelView>/ResolutionType} === 2  }"  defaultSpan="XL5 L5 M5 S12" hSpacing="1"   >
       <!-- Below fields are editable if Resolution ID is null -->
        <VBox>
            <Label  text="{i18n>LblCategory}" required="true" />
             <!-- Binded name property to display validation error  -->
            <!-- <ComboBox width="100%" change="filterProducts"   editable="{=  ${ResolutionId} === null }" -->
  <ComboBox width="100%" change="filterProducts"    editable="{parts:['ApprovalStatus','ComplaintStatus'], formatter:'.formatter.fmtCmbxCategoryType' }"
                   selectedKey="{oModelControl>/CategoryCode}" items="{ path: '/MasterProductCategorySet',  sorter: { path: 'Category' }      }"  name="{oModelView>/PainterComplainProducts/ProductSKUCode}">
                    <core:Item key="{Id}" text="{Category}" />
            </ComboBox>
              <layoutData>
                 	<l:GridData linebreak="true"/>
            </layoutData> 
        </VBox>
        <VBox >
              <Label   text="{i18n>LblProduct}" required="true" />
              <!-- <ComboBox id="idProduct" width="100%" change="filterPacks"  editable="{= ${oModelControl>/CategoryCode}.length > 0 &amp;&amp;  ${ResolutionId} === null }"   -->
                   <ComboBox id="idProduct" width="100%" change="filterPacks" 
                   editable="{parts:['ApprovalStatus','ComplaintStatus'], formatter:'.formatter.fmtProductCmbx' }" 
                    selectedKey="{oModelControl>/ProductCode}"  name="{oModelView>/PainterComplainProducts/ProductSKUCode}" 
                    items="{ path: '/MasterProductSet',    sorter: { path: 'ProductName' }      }">
                    <core:Item key="{Id}" text="{ProductName}" />
            </ComboBox>
        </VBox>
        <VBox>
            <Label required="true" text="{i18n>LblPack}" />
            <!-- <ComboBox change="onPackChange" id="idPacks" editable="{= ${oModelControl>/ProductCode}.length > 0 &amp;&amp;  ${ResolutionId} === null }" width="100%" -->
           <ComboBox change="onPackChange" id="idPacks" editable="{parts:['ApprovalStatus','ComplaintStatus'], formatter:'.formatter.fmtPacksCmbx' }"  width="100%"            
                      selectedKey="{oModelView>/PainterComplainProducts/ProductSKUCode}"
                    items="{ path: '/MasterRepProductSkuSet', parameters : { expand : 'ProductDetails' }, sorter: { path: 'ProductCode' }   }">
                    <core:Item key="{SkuCode}" text="{Description}" />
            </ComboBox> 
        </VBox>
      <VBox>
            <Label required="true" text="{i18n>LblQuantity}" />
            <!-- <ComboBox change="onPointsChange"
            editable="{= ${oModelView>/PainterComplainProducts/ProductSKUCode}.length > 0 &amp;&amp;  ${ResolutionId} === null }" -->
            <ComboBox change="onPointsChange"
           editable="{parts:['ApprovalStatus','ComplaintStatus'], formatter:'.formatter.fmtQuantiyInp' }"
            selectedKey="{path:'oModelView>/PainterComplainProducts/ProductQuantity'}" width="10%" items="{oModelControl>/aQuantity}" >
                 <core:Item key="{oModelControl>key}" text="{oModelControl>value}" ></core:Item>
            </ComboBox>
             <layoutData>
                 	<l:GridData linebreak="true"/>
            </layoutData>
        </VBox>
        <VBox>
            <Label  text="{i18n>Points}" />
            <Input   editable="false" value="{= (+${oModelView>/PainterComplainProducts/Points})*(+${oModelView>/PainterComplainProducts/ProductQuantity}) }" />
             <layoutData>
                 	<l:GridData linebreak="true"/>
            </layoutData>
        </VBox>
</l:Grid>
</core:FragmentDefinition>