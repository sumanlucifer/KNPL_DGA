<core:FragmentDefinition xmlns="sap.m"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:core="sap.ui.core">
    <smartTable:SmartTable  class="sapUiResponsiveContentPadding" id="idWorkListTable1" entitySet="ContractorReassignmentRequests" header="{i18n>contractorreassignrequest}" enableAutoBinding="true" initialNoDataText="{i18n>tableNoDataText}"  editable="false"  beforeRebindTable="onBindTblComplainList" tableType="ResponsiveTable" showRowCount="true" useExportToExcel="false" useVariantManagement="false" useTablePersonalisation="false" demandPopin="false" requestAtLeastFields="ID" >
        <Table sticky="ColumnHeaders,HeaderToolbar" growing="true" growingThreshold="10" growingScrollToLoad="false" noDataText="{i18n>tableNoDataText}">
            <columns>
                <Column hAlign="Begin">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "DGA/GivenName", "leadingProperty": "DGA/GivenName", "columnIndex": 0 ,"sortProperty": "DGA/GivenName","filterProperty": "DGA/GivenName"}'/>
                    </customData>
                    <Text text="{i18n>DGAName}"/>
                </Column>
                <!-- <Column >
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "Lead/Id", "leadingProperty": "Lead/Id", "columnIndex": 1 ,"sortProperty": "Lead/Id","filterProperty": "Lead/Id"}'/>
                    </customData>
                    <Text text="{i18n>leadId}"/>
                </Column> -->
                <Column hAlign="Begin">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "Lead/ConsumerName", "leadingProperty": "Lead/ConsumerName", "columnIndex": 1 ,"sortProperty": "Lead/ConsumerName","filterProperty": "Lead/ConsumerName"}'/>
                    </customData>
                    <Text text="{i18n>ConsumerName}"/>
                </Column>
                  <Column hAlign="Begin"> 
                     <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "Lead/PrimaryNum", "leadingProperty": "Lead/PrimaryNum", "columnIndex": 2 ,"sortProperty": "Lead/PrimaryNum","filterProperty": "Lead/PrimaryNum"}'/>
                    </customData>
                    <Text text="{i18n>conPhoneNo} {i18n>PhoneNo}"/>
                </Column>
                <Column hAlign="Begin">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "CreatedAt", "type":"date", "leadingProperty": "CreatedAt", "columnIndex": 3 ,"sortProperty": "CreatedAt","filterProperty": "CreatedAt"}'/>
                    </customData>
                    <Text text="{i18n>ReqDate}"/>
                </Column>
                 <Column hAlign="Begin">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "PreviousContractor/Name", "leadingProperty": "PreviousContractor/Name", "columnIndex": 4 ,"sortProperty": "PreviousContractor/Name","filterProperty": "PreviousContractor/Name"}'/>
                    </customData>
                    <Text text="{i18n>ContractorName}"/>
                </Column>
                 <Column >
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "ReassignedContractorName", "leadingProperty": "ReassignedContractorName,ReassignedContractor/Name", "columnIndex": 5 }'/>
                    </customData>
                    <Text  text="{i18n>reassigncontractor}"/>
                </Column>
                <Column hAlign="Begin">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "ReassignmentStatus/Name", "leadingProperty": "ReassignmentStatus/Name", "columnIndex": 6 ,"sortProperty": "ReassignmentStatus/Name","filterProperty": "ReassignmentStatus/Name"}'/>
                    </customData>
                    <Text text="{i18n>ReqStatus}"/>
                </Column>
                <Column hAlign="Begin">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "Remark", "leadingProperty": "Remark", "columnIndex": 7 ,"sortProperty": "Remark","filterProperty": "Remark"}'/>
                    </customData>
                    <Text text="{i18n>Remark}"/>
                </Column>
                 <Column width="14%" >
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "Actions"}'/>
                    </customData>
                    <Text text="{i18n>Actions}"/>
                </Column> 
            </columns>
            <items>
                <ColumnListItem press="onListItemPress">
                    <cells>
                        <Text text="{DGA/GivenName}"/>
                         <!-- <Text text="{Lead/Id}"/> -->
                         <Text text="{Lead/ConsumerName}"/>
                        <Text text="{Lead/PrimaryNum}"/>
                         <Text text="{path:'CreatedAt',type:'sap.ui.model.odata.type.DateTime',formatOptions:{pattern:'dd/MM/YYYY h:mm a'}}"/>
                        <Text class="sapUiSmallMarginBegin" text="{PreviousContractor/Name}"/>
                              <Text  text="{= ${ReassignedContractorName}  ? ${ReassignedContractorName} : ${ReassignedContractor/Name} }"/>
                        <ObjectStatus text="{ReassignmentStatus/Name}" 
            state="{= ${ReassignmentStatus/Name} === 'Pending' ? 'Warning' : ${ReassignmentStatus/Name} === 'Rejected' ? 'Error' :  ${ReassignmentStatus/Name} === 'Accepted' ? 'Success' : 'Error'}"/>
                          <Text text="{Remark}"/>
                           <HBox>
                         <Button visible="{= ${ReassignmentStatus/Name} === 'Accepted' ? false : ${ReassignmentStatus/Name} === 'Rejected' ? false: true }" text="{i18n>Approve}" tooltip="{i18n>Accepted}"  type="Accept" press="onPressApproveReject"></Button>
                         <Button  class="sapUiTinyMarginBegin" visible="{= ${ReassignmentStatus/Name} === 'Accepted' ? false : ${ReassignmentStatus/Name} === 'Rejected' ? false: true }"  text="{i18n>Reject}"  press="onPressApproveReject" type="Reject" tooltip="{i18n>Rejected}"/>
                                        </HBox>  
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </smartTable:SmartTable>
</core:FragmentDefinition>
