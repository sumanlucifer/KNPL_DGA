<core:FragmentDefinition xmlns:html="http://www.w3.org/1999/xhtml" xmlns:smartForm="sap.ui.comp.smartform" xmlns:smartField="sap.ui.comp.smartfield" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core">
    <VBox width="100%">
        <f:SimpleForm editable="true" layout="ResponsiveGridLayout" labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="3" columnsL="3" columnsM="2" singleContainerFullSize="false">
            <f:content>
                <core:Title text="{i18n>Membership}" />
                <Label text="{i18n>MembershipId}" />
                <Text text="{MembershipCard}" />
                <Label required="false" text="{i18n>DateOfJoining}" />
                <Text text="{path:'JoiningDate',type:'sap.ui.model.type.Date',formatOptions:{pattern:'dd/MM/yyyy'} }" visible="{= ${oModelView>/profileEdit} !== true }" />
                <!-- This section is visible initally for the displaying mobile no, to send change request for the first time, showing the status of mob no change req if its approved-->  
                <Label required="false" text="{i18n>PrimaryMobileNo}" />
                <VBox>
                    <items>
                            <HBox width="100%" alignContent="Center"><items>
                             <Text text="{Mobile}" class="sapUiTinyMarginEnd" />
                            <core:Icon src="sap-icon://message-information" press="onIconMobileHistoryPress"  visible="{= ${PainterMobileNumberChangeRequest} !== null  }"/>
                          </items></HBox>
                             <ObjectAttribute title="{i18n>MobileChangeStatus}" text="{PainterMobileNumberChangeRequest/Status}" visible="{= ${PainterMobileNumberChangeRequest/Status} === 'APPROVED'  }" ></ObjectAttribute>
                           <Link text="{i18n>SendReqForUpdateMobile}" visible="{parts:['PainterMobileNumberChangeRequest', 'oModelControl2>/MobileChangeWorkflow/Edit', 'LoginInfo>/UserTypeId','PainterBankDetails/Status','PainterKycDetails/Status','MembershipCard','PainterMobileNumberChangeRequest/Status'], formatter:'.formatter.fmtSendApprMobChangeReq'}" press="onMobileChangePress" />
                    </items>
                </VBox>
                  <!-- This section is the edit section used for taking the details like new mob no and sending the request-->  
                 <Label text="{i18n>UpdateMobile}" visible="{= ${oModelControl2>/MobileChangeWorkflow/Edit} === true }"/>
                <VBox width="100%"  visible="{= ${oModelControl2>/MobileChangeWorkflow/Edit} === true}">
                    <items>
                          <Input type="Number" placeholder="{i18n>Enter} {i18n>UpdateMobile}" value="{oModelControl2>/MobileChangeWorkflow/RequestedField}" />
                          <HBox>
                            <Button text="{i18n>SendForApproval}" class="sapUiTinyMarginEnd" type="Ghost" press=".onSendApprovalMobileChange" />
                            <Button text="{i18n>Cancel}" type="Ghost" press="onCancelPressMobileChange" />
                          </HBox>
                    </items>
                </VBox>
                  <!-- This section used for approve and reject of mob no change request. And also displaying detials if the request is not approved-->  
                 <Label text="{i18n>UpdateMobile}" visible="{= ${PainterMobileNumberChangeRequest}!==null &amp;&amp; ${PainterMobileNumberChangeRequest/Status}!=='APPROVED' }"/>
                <VBox width="100%"  visible="{= ${PainterMobileNumberChangeRequest}!==null &amp;&amp; ${PainterMobileNumberChangeRequest/Status}!=='APPROVED'  }">
                    <items>
                          <Text text="{PainterMobileNumberChangeRequest/RequestedMobileNumber}" />
                          <ObjectAttribute title="{i18n>MobileChangeStatus}" text="{PainterMobileNumberChangeRequest/Status}" ></ObjectAttribute>
                            <ObjectAttribute title="{i18n>Remark}" text="{PainterMobileNumberChangeRequest/Remark}" ></ObjectAttribute>
                          <HBox>
                            <Button text="{i18n>Approve}"  class="sapUiTinyMarginEnd" type="Accept" press="onApproveMobileChange('APPROVED')" visible="{parts:['PainterMobileNumberChangeRequest/Status','LoginInfo>/UserTypeId'],formatter:'.formatter.fmtMobileChangeApproveBtn'}" />
                            <Button text="{i18n>Reject}" class="sapUiTinyMarginEnd" type="Reject" press="onRemarksDialogOpen('MOBILE')"  visible="{parts:['PainterMobileNumberChangeRequest/Status','LoginInfo>/UserTypeId'],formatter:'.formatter.fmtMobileChangeApproveBtn'}"  />
                              <Button text="{i18n>Escalate}" type="Critical"  press="onEscalateMobileChange" visible="{parts:['PainterMobileNumberChangeRequest/Status','PainterMobileNumberChangeRequest/AssigneUserType','LoginInfo>/UserTypeId','PainterMobileNumberChangeRequest/InitiateForceTat'],formatter:'.formatter.fmtMobileEscalateBtn'}" />
                          </HBox>
                    </items>
                </VBox>
                <Label text="{i18n>SecondryMobileNo}" />
                <VBox items="{path:'PainterContact/',templateShareable: false}">
                    <Text text="{Mobile}" />
                </VBox>

                <Label text="{i18n>PainterType}" />
                <Text text="{PainterType/PainterType}" />
                <Label text="{i18n>AgeGroup}" />
                <Text text="{path:'AgeGroup/AgeGroup',formatter:'.fmtAgeGrp'}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>PreferredLanguage}" />
                <Text text="{Preference/Language/Language}" visible="{= ${oModelView>/profileEdit} !== true }" />
                 <Label text="{i18n>Expertise}"/>
                <MultiComboBox editable="false" selectedKeys="{path:'PainterExpertise/',formatter:'.formatter.fmtExperience'}" items="{path:'/MasterExpertiseSet',filters:[{path:'IsArchived',operator:'EQ',value1:false}] }">
                    <core:Item text="{Expertise}" key="{Id}"/>
                 </MultiComboBox>
                <Label text="{i18n>CreatedBy}" />
                <Text text="{path:'CreatedByDetails',formatter:'.formatter.fmtDisplayUpdatedDetails'}" />
                <Label text="{i18n>CreatedAt}" />
                <Text text="{path:'CreatedAt',type:'sap.ui.model.type.Date',formatOptions:{pattern:'dd/MM/YYYY h:mm a'}}"/>
                 <Label text="{i18n>LastUpdatedBy}" />
                  <Text text="{path:'UpdatedByDetails',formatter:'.formatter.fmtDisplayUpdatedDetails'}" />
                <Label text="{i18n>LastUpdatedAt}" />
                <Text text="{path:'UpdatedAt',type:'sap.ui.model.type.Date',formatOptions:{pattern:'dd/MM/YYYY h:mm a'}}"/>
                <core:Title text="{i18n>PersonalDetails}" />
                <!-- This section is visible initally for the displaying name, to re-assign change request for the first time, showing the status of name change if its approved-->  
                <Label text="{i18n>FullName}" />
                <VBox width="100%">
                    <items>
                          <HBox width="100%" alignContent="Center"><items>
                            <Text text="{Name}" visible="{= ${oModelView>/profileEdit} !== true }"  class="sapUiTinyMarginEnd"/>
                            <core:Icon src="sap-icon://message-information" press="onIconNameHistoryPress" visible="{= ${PainterNameChangeRequest} !== null  }"/>
                          </items></HBox>
                           <ObjectAttribute title="{i18n>NameChangeStatus}" text="{PainterNameChangeRequest/Status}" visible="{= ${PainterNameChangeRequest/Status} === 'APPROVED'  }" ></ObjectAttribute>
                          <Link text="{i18n>SendReqForUpdateName}" visible="{parts:['PainterNameChangeRequest', 'oModelControl2>/NameChange/Edit', 'LoginInfo>/UserTypeId','PainterBankDetails/Status','PainterKycDetails/Status','MembershipCard','PainterNameChangeRequest/Status'], formatter:'.formatter.fmtSendApprNameChangeReq'}" press="onNameChangePress" />
                    </items>
                </VBox>
                  <!-- This section is the edit section used for taking the details like name and sending the req to back end -->  
                <Label text="{i18n>UpdateName} ({i18n>Message12})" visible="{= ${oModelControl2>/NameChange/Edit} === true }"/>
                <VBox width="100%"  visible="{= ${oModelControl2>/NameChange/Edit} === true }">
                    <items>
                          <Input placeholder="{i18n>Enter} {i18n>UpdateName}" value="{oModelControl2>/NameChange/RequestedName}" />
                          <HBox>
                            <Button text="{i18n>SendForApproval}" class="sapUiTinyMarginEnd" type="Ghost" press=".onSendApprovalNameChange" />
                            <Button text="{i18n>Cancel}" type="Ghost" press="onCancelPressNameChange" />
                          </HBox>
                    </items>
                </VBox>
                 <!-- This section used for approve and reject of name change request. And also displaying detials if the request is not approved-->  
                <Label text="{i18n>UpdateName}" visible="{= ${PainterNameChangeRequest}!==null &amp;&amp; ${PainterNameChangeRequest/Status} !== 'APPROVED'  }"/>
                <VBox width="100%"  visible="{= ${PainterNameChangeRequest}!==null &amp;&amp; ${PainterNameChangeRequest/Status} !== 'APPROVED' }">
                    <items>
                          <Text text="{PainterNameChangeRequest/RequestedName}" />
                          <ObjectAttribute title="{i18n>NameChangeStatus}" text="{PainterNameChangeRequest/Status}" ></ObjectAttribute>
                            <ObjectAttribute title="{i18n>Remark}" text="{PainterNameChangeRequest/Remark}" ></ObjectAttribute>
                          <HBox>
                            <Button text="{i18n>Approve}" class="sapUiTinyMarginEnd" type="Accept" press="onApproveNameChange('APPROVED')" visible="{parts:['PainterNameChangeRequest/Status','LoginInfo>/UserTypeId'],formatter:'.formatter.fmtNameApprove'}" />
                            <Button text="{i18n>Reject}" class="sapUiTinyMarginEnd" type="Reject" press="onRemarksDialogOpen('NAME')"  visible="{parts:['PainterNameChangeRequest/Status','LoginInfo>/UserTypeId'],formatter:'.formatter.fmtNameApprove'}"  />
                              <Button text="{i18n>Escalate}" type="Critical" press="onEscalateNameChange" visible="{parts:['PainterNameChangeRequest/Status','PainterNameChangeRequest/AssigneUserType','LoginInfo>/UserTypeId','PainterNameChangeRequest/InitiateForceTat'],formatter:'.formatter.fmtNameEscalate'}" />
                          </HBox>
                    </items>
                </VBox>
                <Label required="false" text="{i18n>EmailId}" />
                <Text text="{Email}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>MaritalStatus}" />
                <Text text="{MaritalStatus/MaritalStatus}" />
                <Label text="{i18n>Religion}" />
                <Text text="{Religion/Religion}" />
                <Label text="{i18n>HouseType}" />
                <Text text="{path:'HouseType',formatter:'.fmtLowerCase'}" />
                
                <Text text="" visible="{= ${oModelView>/profileEdit} !== true }" />
                <core:Title text="{i18n>LocationDetails}" />
                <Label text="{i18n>PinCode}" />
                <Text text="{PainterAddress/PinCode}" />
                <Label text="{i18n>State}" />
                <Text text="{PainterAddress/StateDetails/State}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>City}" />
                <Text text="{PainterAddress/CityDetails/City}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>Area}" />
                <Text width="60%" maxLines="5" wrapping="true" text="{PainterAddress/AddressLine1}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>Town}" />
                <Text text="{PainterAddress/Town}" />
                <!--Permanent Address -->
                <Label text="{i18n>AddressMessage1}"/>
                <Text text="{= ${PainterAddress/IsSamePrAddress}===true?'Yes':'No'}" />
                <Label text="{1i8nPermanent} {i18n>PinCode}" />
                <Text text="{PainterAddress/PrPinCode}" />
                <Label text="{1i8nPermanent} {i18n>State}" />
                <Text text="{PainterAddress/PrStateDetails/State}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{1i8nPermanent} {i18n>City}" />
                <Text text="{PainterAddress/PrCityDetails/City}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{1i8nPermanent} {i18n>Area}" />
                <Text width="60%" maxLines="5" wrapping="true" text="{PainterAddress/PrAddressLine1}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{1i8nPermanent} {i18n>Town}" />
                <Text text="{PainterAddress/PrTown}" />
                  <!--Permanent Address End -->
                <Label text="{i18n>Zone}" />
                <Text text="{ZoneId}" />
                <Label text="{i18n>Division}" />
                <Text text="{DivisionId}" />
                <Label text="{i18n>Depot}" />
                <Text text="{Depot/Depot}" />
                <Label text="{i18n>LinkPrimaryDealer}" />
                <Text text="{PrimaryDealerDetails/DealerName} - {PrimaryDealerDetails/Id}" />
                <Label text="{i18n>LinkSecondryDealer}" />
                <Link text="{=${Dealers}.length} {i18n>Dealers}" visible="{= ${oModelView>/profileEdit} !== true }" press="onPressDealerLink" />
              
                <core:Title text="{i18n>SecurityQuestions}" />
                <Label text="{i18n>Question}" />
                <Text text="{Preference/SecurityQuestion/Question}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>Answer}" />
                <Text text="{Preference/SecurityAnswer}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <core:Title text="{i18n>Segmentation}" />
                <Label text="{i18n>TeamSize}" />
                <Text text="{PainterSegmentation/TeamSizeDetails/TeamSize}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>Experiences}" />
                <Text text="{PainterSegmentation/PainterExperienceDetails/Experience}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>SitePerMonth}" />
                <Text text="{PainterSegmentation/SitePerMonthDetails/SitePerMonth}" visible="{= ${oModelView>/profileEdit} !== true }" />
                <Label text="{i18n>AnnualPaidPotential}" />
                <Text text="{PainterSegmentation/PotentialDetails/Potential}" visible="{= ${oModelView>/profileEdit} !== true }" />
               
                <core:Title text="{i18n>BusinessDetails}" />
                <Label text="{i18n>BusinessCategory}" />
                <Text text="{BusinessCategory/BusinessCategory}" />
                <Label text="{i18n>BusinessGroup}" />
                <Text text="{BusinessGroup/BusinessGroup}" />
                <Label text="{i18n>ArcheType}" />
                <Text text="{ArcheType/ArcheType}" />

            </f:content>
        </f:SimpleForm>
        <Table id="idFamilyDetils" width="auto" items="{path: 'PainterFamily/'}" noDataText="{i18n>tableNoDataText}" growingScrollToLoad="false" busyIndicatorDelay="{oModelView>/tableBusyDelay}">
            <headerToolbar>
                <Toolbar>
                    <Title text="{i18n>FamilyDetails}" />
                    <ToolbarSpacer />
                    <Button visible="false" text="{i18n>Add}" type="Emphasized" press="onPressAddFamliy" tooltip="{i18n>AddPainter}"></Button>
                </Toolbar>
            </headerToolbar>

            <columns>
                <Column>
                    <Text text="{i18n>SelectRelation}" />
                </Column>
                <Column>
                    <Text text="{i18n>Name}" />
                </Column>
                <Column>
                    <Text text="{i18n>ContactNumber}" />
                </Column>
                <Column width="5%"></Column>
                <Column width="5%"></Column>

            </columns>

            <items>
                <ColumnListItem press="onListItemPress">
                    <cells>
                        <ObjectIdentifier title="{RelationshipDetails/Relationship}" titleActive="true" />

                        <Text text="{Name}" />
                        <Text text="{Mobile}" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
        <Table class="sapUiMediumMarginTop" width="auto" items="{path: 'Vehicles/' }" noDataText="{i18n>tableNoDataText}" growingScrollToLoad="false" busyIndicatorDelay="{oModelView>/tableBusyDelay}">
            <headerToolbar>
                <Toolbar>
                    <Title text="{i18n>AssetDetails}" />
                    <ToolbarSpacer />

                </Toolbar>
            </headerToolbar>

            <columns>
                <Column>
                    <Text text="{i18n>TypeOfAssets}" />
                </Column>
                <Column>
                    <Text text="{i18n>AssetName}" />
                </Column>
                <Column>
                    <Text text="" />
                </Column>
                <Column width="5%"></Column>
                <Column width="5%"></Column>
            </columns>

            <items>
                <ColumnListItem press="onListItemPress">
                    <cells>
                        <ObjectIdentifier title="{VehicleTypeDetails/VehicleType}" titleActive="true" />
                        <Text text="{VehicleName}" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </VBox>
</core:FragmentDefinition>